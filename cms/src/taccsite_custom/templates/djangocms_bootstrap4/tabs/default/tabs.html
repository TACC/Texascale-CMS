{# https://github.com/django-cms/djangocms-bootstrap4/blob/3.0.2/djangocms_bootstrap4/contrib/bootstrap4_tabs/templates/djangocms_bootstrap4/tabs/default/tabs.html #}
{% load cms_tags static sekizai_tags %}

{# TACC (support image content): #}
{% addtoblock "css" %}
<link href="{% static 'taccsite_bootstrap4_tabs/css/tabs.css' %}" rel="stylesheet" />
{% endaddtoblock %}
{# /TACC #}
{# TACC (support manual nav links): #}
{# TACC (so tab click changes URL): #}
{% addtoblock "js" %}
<script src="{% static 'taccsite_bootstrap4_tabs/js/tabs.js' %}" type="module"></script>
{% endaddtoblock %}
{# /TACC #}
{# /TACC #}

<{{ instance.tag_type }} {{ instance.attributes_str }}>
    <ul class="nav {{ instance.tab_type }}
        {% if instance.tab_alignment %} {{ instance.tab_alignment }}{% endif %}"
        role="tablist">
        {% for plugin in instance.child_plugin_instances %}
            <li class="nav-item">
                <a href="#tab-{{ forloop.counter }}"
                    class="nav-link{% if instance.tab_index == forloop.counter %} active{% endif %}"
                    id="tab-label-{{ forloop.counter }}"
                    {# TACC (so tab click changes URL): #}
                    {# data-toggle="tab" #}
                    {# /TACC #}
                    aria-controls="tab-{{ forloop.counter }}"
                    aria-selected="{% if instance.tab_index == forloop.counter %}true{% else %}false{% endif %}"
                    role="tab">
                    {# TACC (support image content): #}
                    {% if plugin.tab_image %}
                        {% include "./tabs_image.html" with instance=plugin.tab_image %}
                        <span class="sr-only">
                            {{ plugin.tab_title }}
                        </span>
                    {% else %}
                        {{ plugin.tab_title }}
                    {# TACC (support image content): #}
                    {% endif %}
                    {# /TACC #}
                </a>
            </li>
        {% endfor %}
    </ul>

    <div class="tab-content">
        {% for plugin in instance.child_plugin_instances %}
            <div class="tab-pane
                {% if instance.tab_index == forloop.counter %} show active{% endif %}
                {% if instance.tab_effect %}{{ instance.tab_effect }}{% endif %}"
                id="tab-{{ forloop.counter }}"
                aria-labelledby="tab-label-{{ forloop.counter }}"
                role="tabpanel">
                {% render_plugin plugin %}
            </div>
        {% endfor %}
    </div>
</{{ instance.tag_type }}>
